---
Description: Windows アプリを設計および最適化する方法について説明します。これにより、キーボードパワーユーザーと、障碍のあるユーザーとその他のユーザー補助要件の両方に最適なエクスペリエンスが提供されます。
title: キーボード操作
ms.assetid: FF819BAC-67C0-4EC9-8921-F087BE188138
label: Keyboard interactions
template: detail.hbs
keywords: キーボード, アクセシビリティ, ナビゲーション, フォーカス, テキスト, 入力, ユーザーの操作, ゲームパッド, リモート
ms.date: 09/24/2020
ms.topic: article
pm-contact: chigy
design-contact: kimsea
dev-contact: niallm
doc-status: Published
ms.openlocfilehash: ae3d4826c4468cabea318ed230da0cfbb4d5f24b
ms.sourcegitcommit: eda7bbe9caa9d61126e11f0f1a98b12183df794d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/24/2020
ms.locfileid: "91219115"
---
# <a name="keyboard-interactions"></a>キーボード操作

![キーボードのヒーロー画像](images/keyboard/keyboard-hero.jpg)

Windows アプリを設計および最適化する方法について説明します。これにより、キーボードパワーユーザーと、障碍のあるユーザーとその他のユーザー補助要件の両方に最適なエクスペリエンスが提供されます。

複数のデバイスにわたるキーボード入力は、Windows アプリの対話操作全体の重要な部分です。 適切に設計されたキーボード エクスペリエンスがあれば、ユーザーが効率的にアプリの UI を移動し、手を持ち上げなくてもそのすべての機能にキーボードからアクセスできます。

![キーボードとゲームパッドのイメージ](images/keyboard/keyboard-gamepad.jpg)

***一般的な対話式操作パターンは、キーボードとゲームパッドの間で共有されます。***

このトピックでは、特に Pc でのキーボード入力用の Windows アプリ設計に焦点を当てます。 ただし、タッチキーボードやスクリーンキーボード (OSK) などの [ソフトウェアキーボード](#software-keyboard) を使用したり、Xbox ゲームパッドやリモコンのような他の入力デバイスを処理したりするために、適切に設計されたキーボードエクスペリエンスは、Windows ナレーターなどのユーザー補助ツールをサポートするために重要です。

[フォーカスの視覚効果](#focus-visuals)、[アクセス キー](#access-keys)、[UI ナビゲーション](#navigation) など、ここで説明するガイドラインと推奨事項の多くは、これらの他のシナリオにも当てはまります。

**注:**  テキスト入力はハードウェア キーボードとソフトウェア キーボードの両方に使用されますが、このトピックではナビゲーションと対話式操作に焦点を当てます。

## <a name="built-in-support"></a>組み込みサポート

マウスと共に、キーボードは PC で最もよく使われている周辺機器であるため、PC のエクスペリエンスの基本となる部分です。 PC ユーザーは、キーボード入力への応答として、システムと個々のアプリの両方から総合的で一貫性のあるエクスペリエンスがあることを期待します。

すべての UWP コントロールには、キーボードの豊富なエクスペリエンスとユーザー操作の組み込みサポートが含まれていますが、プラットフォーム自体にはカスタム コントロールとアプリの両方で最適と感じるキーボード エクスペリエンスを生み出すための広範な基盤が用意されています。

![キーボードと携帯電話の画像](images/keyboard/keyboard-phone.jpg)

***UWP は、あらゆるデバイスのキーボードをサポートします***

## <a name="basic-experiences"></a>基本的なエクスペリエンス
![フォーカス ベースのデバイス](images/keyboard/focus-based-devices.jpg)

前述のように、Xbox ゲームパッドやリモコンなどの入力デバイスと、ナレーターなどのアクセシビリティ ツールは、ナビゲーションとコマンド実行においてキーボードの入力エクスペリエンスの大半を共有します。 入力の種類とツールが異なってもエクスペリエンスが共通であれば、ユーザーの追加作業は最小限に抑えられ、ユニバーサル Windows プラットフォームの "1 回のビルドで、どこでも実行可能" という目標に貢献します。

必要に応じて、注意する必要がある重要な相違点を特定し、考慮する必要がある軽減策について説明します。

このトピックで説明するデバイスとツールを次に示します。

| デバイス/ツール                       | 説明     |
|-----------------------------------|-----------------|
|キーボード (ハードウェアおよびソフトウェア)   |Windows アプリケーションでは、標準のハードウェアキーボードに加えて、 [タッチ (またはソフトウェア) キーボード](#software-keyboard) と [スクリーンキーボード](#on-screen-keyboard)という2つのソフトウェアキーボードがサポートされています。|
|ゲームパッドとリモート制御         |Xbox のゲームパッドとリモコンは、[10 フィート エクスペリエンス](../devices/designing-for-tv.md)における基本的な入力デバイスです。 ゲームパッドとリモートコントロールの Windows サポートの詳細については、「 [ゲームパッドとリモートコントロールの対話](gamepad-and-remote-interactions.md)」を参照してください。|
|スクリーン リーダー (ナレーター)          |ナレーターは、独自の操作エクスペリエンスと機能を提供する Windows の組み込みスクリーン リーダーですが、依然として基本的なキーボード ナビゲーションと入力に依存しています。 ナレーターについて詳しくは、「[ナレーターの概要](https://support.microsoft.com/help/22798/windows-10-complete-guide-to-narrator)」をご覧ください。|

## <a name="custom-experiences-and-efficient-keyboarding"></a>カスタム エクスペリエンスと効率的なキーボード操作
前述のとおり、さまざまなスキル、能力、期待を持ったユーザーにとってアプリケーションが十分に機能するために、キーボードのサポートは重要です。 次の点を重視することをお勧めします。
- キーボードを使った操作のサポート
    - 操作可能な項目をタブ位置として定義します (操作可能でない項目は、そうしないようにします)。ナビゲーションの順序が論理的かつ予測可能であるようにします ([タブ位置](#tab-stops)をご覧ください)。
    - 初期フォーカスは、最も論理的な要素に設定します ([初期フォーカス](#initial-focus) をご覧ください)。
    - "内部ナビゲーション" には矢印キーのナビゲーションを提供します ([ナビゲーション](#navigation)をご覧ください)。
- キーボード ショートカットのサポート
    - クイック アクションのためのアクセラレータ キーを提供します ([アクセラレータ](#accelerators)をご覧ください)。
    - アプリケーションの UI 内を移動するためのアクセスキーを提供します (「 [アクセスキー](access-keys.md)」を参照してください)

### <a name="focus-visuals"></a>フォーカスの視覚効果 

UWP は、あらゆる入力の種類とエクスペリエンスで適切に動作する 1 つのフォーカスの視覚効果デザインをサポートしています。
![フォーカスの視覚効果](images/keyboard/focus-visual.png)

フォーカスの視覚効果には次のような特徴があります。

- UI 要素がキーボードやゲームパッド/リモコンからフォーカスを受け取ったときに表示されます。
- 実行すべき操作を示すため、強調表示された境界線および UI 要素としてレンダリングされます。
- ユーザーが迷わすにアプリの UI を移動するのに役立ちます。
- アプリ用にカスタマイズできます (「[視認性の高いフォーカスの視覚効果](guidelines-for-visualfeedback.md#high-visibility-focus-visuals)」をご覧ください)。

**注:** UWP のフォーカスの視覚効果は、ナレーターのフォーカスの四角形と同じではありません。

### <a name="tab-stops"></a>タブ位置

キーボードでコントロール (ナビゲーション要素を含む) を操作するには、そのコントロールがフォーカスを取得する必要があります。 コントロールがキーボードフォーカスを受け取る方法の1つは、タブナビゲーションを使用して、アプリケーションのタブオーダーでタブストップとして識別することによって、そのコントロールにアクセスできるようにすることです。

コントロールがタブオーダーに含まれるようにするには、 [IsEnabled](/uwp/api/windows.ui.xaml.controls.control#Windows_UI_Xaml_Controls_Control_IsEnabled) プロパティを **true** に設定し、 [istabstop](/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_IsTabStop) プロパティを **true**に設定する必要があります。

タブオーダーからコントロールを明示的に除外するには、 [Istabstop](/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_IsTabStop) プロパティを **false**に設定します。

既定では、タブ オーダーには UI 要素が作成される順序が反映されます。 たとえば、`StackPanel` には `Button`、`Checkbox`、`TextBox` が含まれ、タブ オーダーは `Button`、`Checkbox`、`TextBox` です。

[TabIndex](/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_TabIndex) プロパティを設定することで、既定のタブ オーダーを上書きできます。

#### <a name="tab-order-should-be-logical-and-predictable"></a>タブ オーダーは、論理的かつ予測可能でなければなりません。

論理的で予測可能なタブ オーダーを使った、適切に設計されたキーボード ナビゲーション モデルがあれば、アプリはより直感的になり、ユーザーは機能をより効率的かつ効果的に探して見つけ、アクセスできるようになります。

すべての対話型コントロールにはタブストップが必要ですが ( [グループ](#control-group)に含まれていない場合)、非インタラクティブコントロール (ラベルなど) は必要ありません。

フォーカスがアプリケーション内をジャンプするようなカスタムのタブ オーダーは使用しないでください。 たとえば、フォーム内のコントロールの一覧には、上から下および左から右へと移動するタブ オーダーが必要です (ロケールによって異なります)。

タブストップのカスタマイズの詳細については、「 [キーボードアクセシビリティ](../accessibility/keyboard-accessibility.md) 」を参照してください。

#### <a name="try-to-coordinate-tab-order-and-visual-order"></a>タブ オーダーと表示順序を調整してみる

タブオーダーと視覚的な順序 (読み取り順序または表示順とも呼ばれます) を調整することで、ユーザーがアプリケーションの UI を移動するときの混乱を軽減できます。

コマンド、コントロール、コンテンツを順序付けし、最も重要なものをタブ オーダーと表示順序の両方で最初に提示するようにしてください。 ただし実際の表示位置は、親レイアウト コンテナーと、レイアウトに影響する子要素の特定のプロパティに左右されることがあります。 特に、グリッド形式または表形式を使用しているレイアウトでは、表示順序がタブ オーダーとまったく異なる場合があります。

**注:** 表示順序はロケールと言語にも依存します。

### <a name="initial-focus"></a>初期フォーカス

初期フォーカスは、アプリケーションやページが最初に起動またはアクティブ化されたときにフォーカスを受け取る UI 要素を指定します。 キーボードを使用する場合は、ユーザーがアプリケーションの UI との対話を開始する、この要素からのものです。

UWP アプリの場合、初期フォーカスはフォーカスを受け取ることができる最上位の [TabIndex](/uwp/api/Windows.UI.Xaml.Controls.Control#Windows_UI_Xaml_Controls_Control_TabIndex) を持つ要素に設定されます。 コンテナー コントロールの子要素は無視されます。 TIE の場合、表示ツリー内の最初の要素がフォーカスを受け取ります。

#### <a name="set-initial-focus-on-the-most-logical-element"></a>初期フォーカスは、最も論理的な要素に設定します。

初期フォーカスは、ユーザーがアプリを起動したり、ページを移動したりするときに最初に実行する可能性が最も高い操作 (つまり、プライマリ操作) の UI 要素に設定します。 次に、それらの例の一部を示します。
-   フォーカスがギャラリー内の最初の項目に設定されているフォト アプリ
-   フォーカスが再生ボタンに設定されているミュージック アプリ

#### <a name="dont-set-initial-focus-on-an-element-that-exposes-a-potentially-negative-or-even-disastrous-outcome"></a>悪影響を与える可能性のある要素または重大な結果を公開する要素に初期フォーカスを設定しない

このレベルの機能は、ユーザーが選択できるようにする必要があります。 重要な結果を生み出す要素に初期フォーカスを設定すると、意図しないデータ消失またはシステム アクセスが生じる可能性があります。 たとえば、電子メールに移動する場合は、[削除] ボタンにフォーカスを設定しないでください。

タブオーダーのオーバーライドの詳細については、「 [フォーカスナビゲーション](focus-navigation.md) 」を参照してください。

### <a name="navigation"></a>ナビゲーション

キーボード ナビゲーションは通常、Tab キーと方向キーによってサポートされます。

![Tab + 方向キー](images/keyboard/tab-and-arrow.png)

既定では、UWP コントロールは以下の基本的なキーボード動作に従います。
-   **Tab キー**を使うと、実行可能な/アクティブなコントロール間をタブ オーダーで移動します。
-   **Shift + Tab** キーを使うと、コントロールを逆タブ オーダーで移動します。 ユーザーが方向キーを使ってコントロール内を移動した場合、フォーカスはコントロール内の最後の既知の値に設定されます。
-   **方向キー**を使うと、コントロール固有の "内部ナビゲーション" が表示されます。ユーザーが "内部ナビゲーション" に入ると、方向キーを使ってもコントロール外に移動しません。 次に、それらの例の一部を示します。
    -   上方向キーまたは下方向キー `ListView` を押すと、との間でフォーカスが移動します `MenuFlyout`
    -   およびに対して現在選択されている値を変更する `Slider``RatingsControl`
    -   カレットを内に移動する `TextBox`
    -   項目を展開する/折りたたむ `TreeView`

これらの既定の動作を使用して、アプリケーションのキーボードナビゲーションを最適化します。

#### <a name="use-inner-navigation-with-sets-of-related-controls"></a>関連するコントロールのセットで ”内部ナビゲーション" を使う

一連の関連するコントロールに方向キーのナビゲーションを提供すると、アプリケーションの UI の全体的な組織内での関係が強化されます。

たとえば、ここに示す `ContentDialog` コントロールは、横 1 列のボタンに既定で内部ナビゲーションを提供します (カスタム コントロールについては、「[コントロール グループ](#control-group)」をご覧ください)。

![ダイアログの例](images/keyboard/dialog.png)

***方向キー ナビゲーションを使うと、関連するボタンのコレクションの操作が簡単になる***

項目が 1 列に表示されている場合、上/下方向キーによって項目を移動します。 項目が 1 行に表示されている場合、右/左方向キーによって項目を移動します。 項目が複数の列にある場合、4 つの方向キーすべてを使って移動します。

#### <a name="define-a-single-tab-stop-for-a-collection-of-related-controls"></a>関連するコントロールのコレクションに対して1つのタブストップを定義する

関連するコントロールまたは補完的なコントロールのコレクションに対して1つのタブストップを定義することで、アプリのタブストップ全体の数を最小限に抑えることができます。

たとえば、次の図は縦に並んだ 2 つの `ListView` コントロールを示しています。 左の図は、`ListView` コントロール間を移動するタブ位置で使われる方向キー ナビゲーション を示しているのに対し、右の図は、Tab キーによって親コントロールを移動する必要をなくすことで、子要素間のナビゲーションがどのように簡単かつ効率的になるかを示しています。


<table>
  <td><img src="images/keyboard/arrow-and-tab.png" alt="arrow and tab" /></td>
  <td><img src="images/keyboard/arrow-only.png" alt="arrow only" /></td>
</table>

***縦に並んだ 2 つの ListView コントロールの操作は、タブ位置をなくして方向キーだけで移動することにより、簡単かつ効率的になります。***

アプリケーション UI に最適化の例を適用する方法については、「[コントロール グループ](#control-group)」をご覧ください。

### <a name="interaction-and-commanding"></a>対話式操作とコマンド実行

コントロールにフォーカスが置かれると、ユーザーはそのコントロールを操作し、特定のキーボード入力を使って関連付けられている機能を呼び出すことができます。

#### <a name="text-entry"></a>テキスト入力

`TextBox` や `RichEditBox` など、特にテキスト入力向けに設計されたコントロールの場合、テキストの入力や移動のためにすべてのキーボード入力が使用され、他のキーボード コマンドより優先されます。 たとえば、`AutoSuggestBox` コントロールのドロップ ダウン メニューは **Space** キーを選択コマンドとして認識しません。

![テキスト入力](images/keyboard/text-entry.png)

#### <a name="space-key"></a>Space キー

テキスト入力モードではない場合、**Space** キーはフォーカスがあるコントロールに関連付けられた操作やコマンドを呼び出します (タッチによるタップやマウスによるクリックと同様)。

![Space キー](images/keyboard/space-key.png)

#### <a name="enter-key"></a>Enter キー

**Enter** キーは、フォーカスのあるコントロールに応じて、さまざまな共通ユーザー操作を実行できます。
-   `Button` や `Hyperlink` などのコマンド コントロールをアクティブ化します。 エンド ユーザーの混乱を避けるため、**Enter** キーは `ToggleButton` や `AppBarToggleButton` など、コマンド コントロールに似たコントロールもアクティブ化します。
-   `ComboBox` や `DatePicker` などのコントロールのピッカー UI を表示します。 **Enter** キーは、ピッカー UI もコミットして閉じます。
-   `ListView`、`GridView`、`ComboBox` などのリスト コントロールをアクティブ化します。
    -   **Enter** キーは、選択操作をリストおよびグリッド項目の **Space** キーとして実行します。ただし、それらの項目に追加の操作が関連付けられている場合を除きます (新しいウィンドウを開くなど)。
    -   コントロールに追加の操作が関連付けられている場合、**Enter** キーは追加の操作を実行し、**Space** キーは選択操作を実行します。

**注:****Enter** キーと **Space** キーは、常に同じ操作を実行するわけではありませんが、多くの場合は同じ操作を実行します。

![Enter キー](images/keyboard/enter-key.png)

Esc キーを使うと、ユーザーが一時的な UI (および、その UI における継続的な操作すべて) を取り消すことができます。

このエクスペリエンスの例は次のとおりです。
-   ユーザーが、選択した値を使って `ComboBox` を開き、方向キーを使ってフォーカスの選択を新しい値に移動します。 Esc キーを押すと `ComboBox` が閉じ、選択した値が元の値にリセットされます。
-   ユーザーがメールの永続的な削除アクションを呼び出すと、操作の確認を求める `ContentDialog` が表示されます。 ユーザーは、これが意図した操作でないと判断し、**Esc** キーを押してダイアログを閉じます。 **Esc** キーは **[キャンセル]** ボタンに関連付けられているため、ダイアログが閉じ、操作は取り消されます。 **Esc** キーは一時的な UI にのみ影響を与えます。アプリの UI を閉じたり、戻ったりすることはありません。

![Esc キー](images/keyboard/esc-key.png)

#### <a name="home-and-end-keys"></a>Home and End keys

**Home** キーと **End** キーを使うと、ユーザーは UI 領域の先頭または末尾までスクロールできます。

このエクスペリエンスの例は次のとおりです。
-   `ListView` コントロールと `GridView` コントロールの場合、**Home** キーはフォーカスを最初の要素に移動してビューまでスクロールしますが、**End** キーはフォーカスを最後の要素に移動し、ビューまでスクロールします。
-   `ScrollView` コントロールの場合、**Home** キーは領域の上までスクロールしますが、**End** キーは領域の下までスクロールします (フォーカスが変更されません)。

![Home キーと End キー](images/keyboard/home-and-end.png)

#### <a name="page-up-and-page-down-keys"></a>PageUp キーと PageDown キー

**Page** キーを使うと、ユーザーは一定の単位で UI 領域をスクロールできます。

たとえば、`ListView` コントロールと `GridView` コントロールの場合、**PageUp** キーは領域を 1 "ページ" 分 (通常はビューポートの高さ) 上にスクロールし、領域の上にフォーカスを移動します。 一方、**PageDown** キーは領域を 1 ページ分下に移動し、領域の下にフォーカスを移動します。

![PageUp キーと PageDown キー](images/keyboard/page-up-and-down.png)

### <a name="keyboard-shortcuts"></a>キーボード ショートカット

キーボードショートカットを使用すると、ユーザー補助機能の強化されたサポートと、キーボードユーザーの効率向上の両方を実現することで、アプリを使いやすくすることができます。

アプリでのキーボードナビゲーションとアクティベーションのサポートに加えて、アプリケーションの機能にショートカットを提供することもお勧めします。 タブナビゲーションは、基本的な基本レベルのキーボードサポートを提供しますが、より複雑な UI では、ショートカットキーのサポートを追加することもできます。 

ショートカットは、ユーザーが効率的にアプリの機能にアクセスできるようにして、生産性を向上させるためのキーの組み合わせです。 ショートカットには次の 2 つの種類があります。
-   [アクセラレータ](#accelerators) は、アプリコマンドを呼び出すショートカットです。 アプリには、コマンドに対応する特定の UI が提供される場合とない場合があります。 アクセラレータは通常、Ctrl キーと文字キーで構成されます。
-   [アクセスキー](#access-keys) は、アプリケーションの特定の UI にフォーカスを設定するショートカットです。 アクセスキーの typy は、Alt キーと letter キーで構成されます。

アプリケーション間で同様のタスクをサポートする、一貫性のあるキーボードショートカットを提供することにより、ユーザーはより便利で強力なものになり、ユーザーが覚えやすくなります。

#### <a name="accelerators"></a>アクセラレータ

アクセラレータは、ユーザーがアプリケーションで一般的な操作をより迅速かつ効率的に実行するのに役立ちます。 

アクセラレータの例:
-   **メール**アプリの任意の場所で Ctrl キーを押しながら N キーを押すと、新しいメールアイテムが起動されます。
-   Microsoft Edge (および多くの Microsoft Store アプリケーション) の任意の場所で Ctrl キーを押しながら E キーを押すと、検索が開始されます。

アクセラレータには、次の特徴があります。
-   主に、Ctrl キーとファンクションキーのシーケンスを使用します (Windows システムのショートカットキーでは、Alt + 英数字以外のキーと Windows ロゴキーも使用します)。
-   特に使用頻度の高いコマンドにのみ割り当てます。
-   覚えて使うことを意図しており、メニュー、ツールヒント、ヘルプ内にのみ示されています。
-   サポートされている場合は、アプリケーション全体で有効になります。
-   これらの覚えは、直接文書化されているのではなく、常に割り当てられている必要があります。

#### <a name="access-keys"></a>アクセス キー

UWP でアクセス キーをサポートする方法について詳しくは、「[アクセス キー](access-keys.md)」をご覧ください。

アクセス キーを使うと、運動機能に障碍を持つユーザーが、一度に 1 つのキーを押して UI の特定の項目に対してアクションを実行することができます。 さらに、アクセス キーは上級ユーザーが操作をすばやく実行できるように、追加のショートカット キーを伝えるためにも使用できます。

アクセス キーには、次の特徴があります。
-   Alt キーを押しながら英数字キーを押します。
-   主な目的はアクセシビリティです。
-   これらは、 [主要なヒント](access-keys.md)を通じて、コントロールに隣接する UI に直接記載されています。
-   アクセス キーは、対応するメニュー項目やコントロールへの移動に使用します。効力は現在のウィンドウ内に限られます。
-   アクセスキーは、可能な限り、一般的に使用されるコマンド (特にコミットボタン) に一貫して割り当てる必要があります。
-   アクセス キーはローカライズされます。

#### <a name="common-keyboard-shortcuts"></a>一般的なキーボード ショートカット

次の表は、よく使用されるキーボードショートカットの小さなサンプルです。 

| 操作                               | キー コマンド                                      |
|--------------------------------------|--------------------------------------------------|
| すべて選択する                           | Ctrl + A                                           |
| 連続して選択                  | Shift + 方向キー                                  |
| 保存                                 | Ctrl + S                                           |
| Find                                 | Ctrl + F                                           |
| 印刷                                | Ctrl + P                                           |
| コピー                                 | Ctrl+C                                           |
| ［切り取り］                                  | Ctrl + X                                           |
| 貼り付け                                | Ctrl + V                                           |
| 元に戻す                                 | Ctrl + Z                                           |
| 次のタブ                             | Ctrl + Tab                                         |
| タブを閉じる                            | Ctrl + 4 または Ctrl + W                                |
| セマンティック ズーム                        | Ctrl + 正符号 (+) または Ctrl + マイナス記号 (-)                                 |

Windows のシステムショートカットの一覧については、「 [windows 用のキーボードショートカット](https://support.microsoft.com/help/12445/windows-keyboard-shortcuts)」を参照してください。 一般的なアプリケーションショートカットについては、「 [Microsoft アプリケーションのキーボードショートカット](https://support.microsoft.com/help/13805/windows-keyboard-shortcuts-in-apps)」を参照してください。

## <a name="advanced-experiences"></a>高度なエクスペリエンス

このセクションでは、UWP アプリによりサポートされているより複雑なキーボード操作エクスペリエンスと、アプリをさまざまなデバイスやツールで使う場合に認識すべき動作についていくつか説明します。

### <a name="control-group"></a>コントロールグループ

一連の関連する (または補完的な) コントロールを "コントロール グループ" (または方向領域) にまとめることで、方向キーを使った "内部ナビゲーション" が可能になります。 コントロール グループは、1 つのタブ位置にすることも、コントロール グループ内の複数のタブ位置を指定することもできます。

#### <a name="arrow-key-navigation"></a>方向キー ナビゲーション

ユーザーは、UI 領域に似たような関連するコントロールのグループがあるとき、方向キー ナビゲーションがサポートされることを期待します。
-   `AppBarButtons` で `CommandBar`
-   `ListItems` また `GridItems` `ListView` は内部または `GridView`
-   `Buttons` 中に `ContentDialog`

UWP コントロールは、方向キー ナビゲーションを既定でサポートします。 カスタム レイアウトおよびコントロール グループでは、`XYFocusKeyboardNavigation="Enabled"` を使って同様の動作を提供します。

次のコントロールを使用する場合は、方向キーのナビゲーションのサポートを追加することを検討してください。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/dialog.png" alt="Dialog buttons"/></p>
      <p><sup>ダイアログボタン</sup></p>
      <p><img src="images/keyboard/radiobutton.png" alt="Radio buttons"/></p>
      <p><sup>RadioButtons</sup></p>     
    </td>
    <td>
      <p><img src="images/keyboard/appbar.png" alt="AppBar buttons"/></p>
      <p><sup>AppBarButtons</sup></p>
      <p><img src="images/keyboard/list-and-grid-items.png" alt="List and Grid items"/></p>
      <p><sup>ListItems および GridItems</sup></p>
    </td>    
  </tr>
</table>

#### <a name="tab-stops"></a>タブ位置

アプリケーションの機能とレイアウトによっては、コントロールグループの最適なナビゲーションオプションとして、子要素への矢印ナビゲーション、複数のタブ停止、または組み合わせがあります。

##### <a name="use-multiple-tab-stops-and-arrow-keys-for-buttons"></a>ボタンに複数のタブ位置と方向キーを使う

アクセシビリティ ユーザーは、通常はボタンのコレクションの移動に方向キーを使わない、実績のあるキーボード ナビゲーション ルールに依存しています。 ただし、視覚に障碍のないユーザーは、動作が自然であると感じる可能性があります。

この場合、既定の UWP の動作の例は `ContentDialog` です。 方向キーはボタン間の移動に使うことができますが、各ボタンはタブ位置でもあります。

##### <a name="assign-single-tab-stop-to-familiar-ui-patterns"></a>使い慣れた UI パターンに 1 つのタブ位置を割り当てる

レイアウトがコントロール グループのよく知られている UI パターンに従っている場合、グループに 1 つのタブ位置を割り当てるとユーザーのナビゲーション効率を向上することがあります。

以下に例を示します。
-   `RadioButtons`
-   `ListViews`と似ていて、1つののように動作する`ListView`
-   タイルのグリッドと外観や動作が似ている UI (スタート メニューのタイルなど)

#### <a name="specifying-control-group-behavior"></a>コントロール グループの動作を指定する

カスタム コントロール グループの動作は、以下の API を使ってサポートします (すべてこのトピックの後半で詳しく説明します)。

-   [XYFocusKeyboardNavigation](focus-navigation.md#2d-directional-navigation-for-keyboard) は、コントロール間での方向キー ナビゲーションを可能にします。
-   [TabFocusNavigation](focus-navigation.md#tab-navigation) は、タブ位置が複数か 1 つかを示します。
-   [FindFirstFocusableElement and FindLastFocusableElement](focus-navigation-programmatic.md#find-the-first-and-last-focusable-element) は、フォーカスを **Home** キーによって最初の項目に、**End** キーによって最後の項目に設定します。

次の図は、関連付けれらたラジオ ボタンのコントロール グループにおける直感的なキーボード ナビゲーションの動作を示しています。 この場合、コントロール グループの 1 つのタブ位置、方向キーを使ったラジオ ボタン間の内部ナビゲーション、最初のラジオ ボタンにバインドされた **Home** キー、最後のラジオ ボタンにバインドされた **End** キーをお勧めします。

![組み立てる](images/keyboard/putting-it-all-together.png)

### <a name="keyboard-and-narrator"></a>キーボードとナレーター

ナレーターは、キーボード ユーザーを対象に用意された UI アクセシビリティ ツールです (他の入力の種類もサポートされます)。 ただし、ナレーター機能は UWP アプリによりサポートされているキーボード操作を上回るため、ナレーター用に UWP アプリを設計するときは特別な注意が必要です  (ナレーターのユーザー エクスペリエンスについては、「[ナレーターの基本について](https://support.microsoft.com/help/22808/windows-10-narrator-basics)」をご覧ください)。

UWP のキーボードの動作とナレーターによりサポートされている動作の違いには、以下のようなものがあります。
-   標準的なキーボード ナビゲーションでは表示されない UI 要素にナビゲーションするための追加のキーの組み合わせ (CapsLock + 方向キーを使ってコントロール ラベルを読み上げるなど)。
-   無効な項目へのナビゲーション。 既定では、無効な項目は標準的なキーボード ナビゲーションによって表示されません。
-   UI の細かさに基づいてすばやくナビゲーションするための コントロール "ビュー"。 ユーザーは、項目、文字、単語、行、段落、リンク、見出し、表、ランドマーク、および候補に移動できます。 標準的なキーボード ナビゲーションでは、これらのオブジェクトが階層のないリストとして表示されるため、ショートカット キーがないとナビゲーションしにくくなる可能性があります。

#### <a name="case-study--autosuggestbox-control"></a>ケース スタディ – AutoSuggestBox コントロール

`AutoSuggestBox` の検索ボタンでは、ユーザーが **Enter** キーを押して検索クエリを送信できるため、Tab および方向キーを使って標準的なキーボード ナビゲーションにアクセスすることができません。 ただし、ユーザーが CapsLock + 方向キーを押すとナレーターを通じてアクセスできます。

![自動提案のキーボード フォーカス](images/keyboard/auto-suggest-keyboard.png)

*キーボードでは、ユーザー*は***enter***キーを押して*検索クエリを送信*します。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/auto-suggest-narrator-1.png" alt="autosuggest narrator focus"/></p>
      <p><em>ナレーターを使用すると、ユーザーは <strong>enter</strong> キーを押して検索クエリを送信することができます。</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/auto-suggest-narrator-2.png" alt="autosuggest narrator focus on search"/></p>
      <p><em>ナレーターでは、ユーザーは、 <strong>capslock + →キー</strong>を使用して [検索] ボタンにアクセスすることもできます。次に、 <strong>Space</strong> キーを押します。</em></p>
    </td>
  </tr>
</table>

### <a name="keyboard-and-the-xbox-gamepad-and-remote-control"></a>キーボードと Xbox ゲームパッドおよびリモコン

Xbox のゲームパッドとリモコンは、UWP の多くのキーボード動作とエクスペリエンスをサポートします。 ただし、キーボードで使用可能なさまざまなキー オプションが不足しているため、ゲームパッドとリモコンに多くのキーボード最適化がありません (リモコンはゲームパッドよりもさらに制限されます)。

ゲームパッドとリモートコントロール入力の UWP サポートの詳細については [、「ゲームパッドとリモートコントロールの対話](gamepad-and-remote-interactions.md) 」を参照してください。

キーボード、ゲームパッド、リモコンにおける対応するキーの例を以下に示します。

| **キーボード**  | **ゲームパッド**                         | **リモート コントロール**  |
|---------------|-------------------------------------|---------------------|
| Space         | A ボタン                            | [選択] ボタン       |
| 次に、         | A ボタン                            | [選択] ボタン       |
| エスケープ        | B ボタン                            | [戻る] ボタン         |
| Home/End      | 該当なし                                 | 該当なし                 |
| PageUp/PageDown  | 縦スクロールはトリガー ボタン、横スクロールはバンパー ボタン   | 該当なし                 |

ゲームパッドとリモコンを使う UWP アプリを設計する際に注意すべきいくつかキーの相違点は次のとおりです。
-   テキストを入力するには、ユーザーは A を押してテキスト コントロールをアクティブ化する必要があります。
-   フォーカス ナビゲーションは、コントロール グループに限定されるわけではありません。ユーザーは、アプリ内のフォーカス可能な任意の UI 要素に自由に移動できます。

    **NOTE** フォーカスは、キーを押した方向にあるフォーカス可能な任意の UI 要素に移動できます。ただし、その要素がオーバーレイ UI にある場合や、[フォーカス エンゲージメント](gamepad-and-remote-interactions.md#focus-engagement)が指定されている場合 (A ボタンによってエンゲージ/エンゲージ解除されるまでフォーカスが領域に入ったり出たりすることができないため) を除きます。 詳しくは、「[方向ナビゲーション](#directional-navigation)」をご覧ください。
-   コントロール間、および内部ナビゲーション用にフォーカスを移動するには、方向パッドと左スティックのボタンが使用されます。

    **注** ゲームパッドとリモコンは、方向キーが押されたとき、同じ表示順序内にある項目のみ移動します。 フォーカスを受け取ることができる後続の要素がない場合、その方向のナビゲーションは無効になります。 状況によっては、キーボード ユーザーは必ずしもそのような制約を持っているわけではありません。 詳しくは、「[組み込みキーボードの最適化](#built-in-keyboard-optimization)」をご覧ください。

#### <a name="directional-navigation"></a>方向ナビゲーション 

方向ナビゲーションは、UWP [Focus Manager](/uwp/api/Windows.UI.Xaml.Input.FocusManager) ヘルパー クラスにより管理されます。このヘルパー クラスは、方向キーが押されたことを認識し (方向キー、方向パッド)、対応する視覚的な向きにフォーカスを移動しようとします。

キーボードとは異なり、アプリが [マウスモード](gamepad-and-remote-interactions.md#mouse-mode)を終了すると、アプリケーション全体に対して方向のナビゲーションが適用され、ゲームパッドとリモートコントロールを使用できます。 方向ナビゲーションの最適化の詳細については [、「ゲームパッドとリモートコントロールの対話](gamepad-and-remote-interactions.md) 」を参照してください。

**注**キーボードの Tab キーを使ったナビゲーションは、方向ナビゲーションとは見なされません。 詳しくは、「[タブ位置](#tab-stops)」をご覧ください。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/directional-navigation.png" alt="directional navigation"/></p>
      <p><em><strong>方向ナビゲーションがサポートされます</strong></br>方向キー (キーボードの方向キー、ゲームパッドとリモコンの方向パッド) を使って、ユーザーはコントロール間を移動できます。</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/no-directional-navigation.png" alt="no directional navigation"/></p>
      <p><em><strong>方向ナビゲーションはサポートされていません</strong> </br>ユーザーは、方向キーを使ってコントロール間を移動することはできません。 コントロール間を移動する他の方法 (Tab キー) は影響を受けません。</em></p>
    </td>
  </tr>
</table>

### <a name="built-in-keyboard-optimization"></a>組み込みキーボードの最適化 

使用されているレイアウトとコントロールによっては、特にキーボード入力に合わせて UWP アプリを最適化できます。

次の例は、1 つのタブ位置に割り当てられているリスト項目、グリッド項目、メニュー項目のグループを示しています (「[タブ位置](#tab-stops)」をご覧ください)。 グループにフォーカスがある場合、方向キーによって、対応する表示順序で内部ナビゲーションが実行されます (「[ナビゲーション」](#navigation)」をご覧ください)。

![単一列の方向キー ナビゲーション](images/keyboard/single-column-arrow.png)

***単一列方向キーナビゲーション***

![単一行の方向キー ナビゲーション](images/keyboard/single-row-arrow.png)

***単一行の方向キー ナビゲーション***

![複数列および行の方向キー ナビゲーション](images/keyboard/multiple-column-and-row-navigation.png)

***複数列および行の方向キー ナビゲーション***

#### <a name="wrapping-homogeneous-list-and-grid-view-items"></a>同種のリスト項目およびグリッド ビュー項目の折り返し

List 項目と GridView 項目の複数の行と列を移動する場合、必ずしも方向ナビゲーションが最も効率的な方法とは限りません。

**注** メニュー項目は通常単一列のリストですが、場合によっては特別なフォーカス ルールが適用されることがあります (「[ポップアップ UI](#popup-ui)」をご覧ください)。

リスト オブジェクトとグリッド オブジェクトは複数の行と列を使って作成されることがあります。 このようなオブジェクトには通常、行優先順序 (まず項目が行全体に入力されてから、次の行に入力される) または列優先順序 (まず項目が列全体に入力されてから次の列に入力される) が適用されます。 行または列優先順序は、スクロールの方向によって決まり、項目の順序がこの方向と競合しないようにする必要があります。

行優先順序 (項目が左から右、上から下に入力される) では、フォーカスが行内の最後の項目に置かれて右方向キーが押されると、フォーカスは次の行の最初の項目に移動します。 これと同じ動作が逆の順序で発生します。フォーカスが行内の最初の項目に置かれて左方向キーが押されると、フォーカスは前の行の最後の項目に移動します。

列優先順序 (項目が上から下、左から右に入力される) では、フォーカスが列内の最後に項目に置かれて、ユーザーが下方向キーを押すと、フフォーカスが次の列の最初の項目に移動します。 これと同じ動作が逆の順序で発生します。フォーカスが列内の最初の項目に置かれて上方向キーが押されると、フォーカスは前の列の最後の項目に移動します。

<table>
  <tr>
    <td>
      <p><img src="images/keyboard/row-major-keyboard.png" alt="row major keyboard navigation"/></p>
      <p><em>行優先キーボード ナビゲーション</em></p>
    </td>
    <td>
      <p><img src="images/keyboard/column-major-keyboard.png" alt="column major keyboard navigation"/></p>
      <p><em>列の主要なキーボードナビゲーション</em></p>
    </td>
  </tr>
</table>

#### <a name="popup-ui"></a>ポップアップ UI 

前述のように、アプリケーションの UI でのコントロールの視覚的な順序に対応する方向のナビゲーションが確実に対応するようにしてください。

一部のコントロール (コンテキストメニュー、CommandBar オーバーフローメニュー、AutoSuggest メニューなど) では、プライマリコントロールと使用可能な画面領域を基準として、場所と方向 (既定では下向き) にメニューポップアップが表示されます。 実行時には、開始方向がさまざまな要因によって影響を受ける可能性があることに注意してください。

<table>
  <td><img src="images/keyboard/command-bar-open-down.png" alt="command bar opens down with down arrow key" /></td>
  <td><img src="images/keyboard/command-bar-open-up.png" alt="command bar opens up with down arrow key" /></td>
</table>

これらのコントロールでは、メニューを最初に開いたとき (ユーザーが項目を選択していない状態)、下方向キーは常に最初の項目にフォーカスを設定しますが、上方向キーは常にメニューの最後の項目にフォーカスを設定します。 

最後の項目にフォーカスがあり、下方向キーが押されている場合、フォーカスはメニューの最初の項目に移動します。 同様に、最初の項目にフォーカスがあり、↑キーが押されている場合、フォーカスはメニューの最後の項目に移動します。 この動作は " *循環* " と呼ばれ、予期しない方向に開くことができるポップアップメニューを移動する場合に便利です。

> [!NOTE]
> 非ポップアップ Ui では、ユーザーが無限ループでトラップを受け取る可能性があるため、循環を避ける必要があります。 

カスタムコントロールでも、これらの同じ動作をエミュレートすることをお勧めします。 この動作を実装する方法のコードサンプルについては、「 [プログラムフォーカスナビゲーション](focus-navigation-programmatic.md#find-the-first-and-last-focusable-element) のドキュメント」を参照してください。


## <a name="test-your-app"></a>アプリをテストする

サポートされているすべての入力デバイスを使ってアプリをテストし、UI 要素が一貫した直感的な方法で移動できることと、要素と目的のタブ位置の予期しない干渉がないことを確認してください。

## <a name="related-articles"></a>関連記事
* [キーボード イベント](keyboard-events.md)
* [入力デバイスの識別](identify-input-devices.md)
* [タッチ キーボードの表示への応答](respond-to-the-presence-of-the-touch-keyboard.md)
* [フォーカスの視覚効果のサンプル](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/XamlFocusVisuals)
* [NavigationView コントロールのキーボードの詳細](../controls-and-patterns/navigationview.md#hierarchical-navigation) 

## <a name="appendix"></a>付録

### <a name="software-keyboard"></a>ソフトウェア キーボード 

ソフトウェア キーボードは、物理的なキーボードの代わりにユーザーが使うことができる画面上のキーボードです。タッチ、マウス、ペン/スタイラス、またはその他のポインティング デバイスを通じてデータを入力します (タッチ スクリーンは必須ではありません)。 タッチ画面では、これらのキーボードを直接タッチしてテキストを入力することもできます。 Xbox One デバイスでは、ゲームパッドやリモコンを使ってフォーカス表示を移動したりショートカット キーを使ったりすることで、個々のキーを選択する必要があります。

![Windows 10 のタッチ キーボード](images/keyboard/default.png)

***Windows 10 のタッチ キーボード***

![Xbox One のスクリーン キーボード](images/keyboard/xbox-onscreen-keyboard.png)

***Xbox One のスクリーン キーボード***

デバイスに応じて、ソフトウェア キーボードは、テキスト フィールドやその他の編集可能なテキスト コントロールがフォーカスを取得したとき、またはユーザーが**通知センター**で手動でタッチ キーボードを有効にしたときに表示されます。

![通知センターでのタッチ キーボードのアイコン](images/keyboard/touch-keyboard-notificationcenter.png)

テキスト入力コントロールへのフォーカスをプログラムで設定するアプリの場合、タッチ キーボードは呼び出されません。 これにより、ユーザーの直接的な操作による予期しない動作を回避できます。 ただし、プログラムによってキーボードがテキスト入力コントロール以外に移動されると、キーボードが自動的に非表示になります。

通常、ユーザーがフォームでコントロール間を移動している間は、タッチ キーボードは表示されたままです。 この動作は、フォーム内の他のコントロールの種類に基づいて異なります。

タッチ キーボードを使用するテキスト入力セッション中に、キーボードを閉じずにフォーカスを受け取ることができる非編集コントロールの一覧を次に示します。 ユーザーがこれらのコントロールとタッチ キーボードによるテキスト入力との間で何度も行き来することが考えられるため、UI の表示を不必要に切り替えてユーザーを混乱させることのないよう、タッチ キーボードは表示されたままになります。

-   チェック ボックス
-   コンボ ボックス
-   ラジオ ボタン
-   スクロール バー
-   ツリー
-   ツリー項目
-   メニュー
-   メニュー バー
-   メニュー項目
-   ツール バー
-   List
-   リスト項目

次に、タッチ キーボードのさまざまなモードの例を示します。 最初の画像は既定のレイアウトであり、2 つ目の画像は親指レイアウトです (一部の言語では利用できません)。

![既定のレイアウト モードのタッチ キーボード](images/keyboard/default.png)

***既定のレイアウトモードでのタッチキーボード***

![拡張レイアウト モードのタッチ キーボード](images/keyboard/extendedview.png)

***拡張レイアウト モードのタッチ キーボード***

キーボード操作に成功すると、ユーザーはキーボードのみを使って基本のアプリ シナリオを実行できます。つまり、ユーザーはすべての対話型要素にアクセスし、既定の機能をアクティブにすることができます。 成功の度合いには、キーボード ナビゲーション、アクセシビリティ対応のアクセス キー、上級ユーザー用のアクセラレータ (ショートカット) キーなど、さまざまな要因が影響します。

**メモ**   タッチキーボードは、トグルとほとんどのシステムコマンドをサポートしていません。

#### <a name="on-screen-keyboard"></a>スクリーン キーボード
ソフトウェア キーボードと同様、スクリーン キーボードは、物理的なキーボードの代わりに使うことができる視覚的なソフトウェア キーボードです。タッチ、マウス、ペン/スタイラス、またはその他のポインティング デバイスを通じてデータを入力します (タッチ スクリーンは必須ではありません)。 スクリーン キーボードは、物理的なキーボードが存在しないシステムや、運動障碍により一般的な物理入力デバイスを使うことができないユーザーのために用意されています。 スクリーン キーボードは、ハードウェア キーボードの機能のすべて、または少なくともほとんどをエミュレートします。

スクリーン キーボードは、[設定] &gt; [簡単操作] の [キーボード] ページから有効にすることができます。

**注** スクリーン キーボードの方がタッチ キーボードより優先され、スクリーン キーボードが表示されている場合はタッチ キーボードは表示されません。

![スクリーン キーボード](images/keyboard/osk.png)

***スクリーンキーボード***

スクリーン キーボードについて詳しくは、[スクリーン キーボードに関するページ](https://support.microsoft.com/help/10762/windows-use-on-screen-keyboard)をご覧ください。

## <a name="related-articles"></a>関連記事

- [キーボードアクセシビリティ](../accessibility/keyboard-accessibility.md)
