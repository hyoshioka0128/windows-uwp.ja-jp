---
title: ユーザー アクティビティのベスト プラクティス
description: このガイドでは、ユーザーアクティビティを作成および更新するための推奨される方法について説明します。
keywords: ユーザー アクティビティ、ユーザー アクティビティ、タイムライン、Cortana の前回終了した位置から再開する、Cortana の前回終了した位置から再開する、Project Rome
ms.date: 08/23/2018
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: f4e41ac4f340491e551fccc1c1d4700bbe8d8004
ms.sourcegitcommit: 7b2febddb3e8a17c9ab158abcdd2a59ce126661c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/31/2020
ms.locfileid: "89172956"
---
# <a name="user-activities-best-practices"></a>ユーザー アクティビティのベスト プラクティス

このガイドでは、ユーザーアクティビティを作成および更新するための推奨される方法について説明します。 Windows のユーザーアクティビティ機能の概要については、「 [デバイス間でもユーザーアクティビティを続行](./useractivities.md)する」を参照してください。 または、他の開発プラットフォームでのアクティビティの実装については、「Project ローマ」の「 [ユーザーアクティビティ」セクション](/windows/project-rome/user-activities/) を参照してください。

## <a name="when-to-create-or-update-user-activities"></a>ユーザーアクティビティを作成または更新する場合

すべてのアプリが異なるため、アプリ内のアクションをユーザーアクティビティにマップする最適な方法は、各開発者が決定します。 ユーザーアクティビティは Cortana とタイムラインで紹介されます。これは、ユーザーの生産性と効率を向上させることに重点を置いています。これは、過去にアクセスしたコンテンツに戻るために役立ちます。

**一般的なガイドライン**

* **関連するユーザーアクションのグループに対して1つのアクティビティを記録します。** これは、音楽の再生リストまたはテレビ番組に特に関連します。1つのアクティビティを一定の間隔で更新して、ユーザーの進行状況を反映することができます。 この場合は、複数の日または数週間にわたるエンゲージメント期間を表す複数の履歴項目を持つ1つのユーザーアクティビティがあります。 これは、ユーザーがアプリ内で段階的な進捗を行うドキュメントベースのアクティビティにも当てはまります。
* **ユーザーデータをクラウドに格納します。** クロスデバイスアクティビティをサポートする場合は、このアクティビティを再利用するために必要なコンテンツがクラウドの場所に格納されていることを確認する必要があります。 デバイス固有のアクティビティは、アクティビティが作成されたデバイスのタイムラインに表示されますが、他のデバイスでは表示されない場合があります。
* **ユーザーによる再開が不要なアクションに対しては、アクティビティを作成しないでください。** アプリケーションを使用して、状態を保持しない単純な1回限りの操作を完了する場合は、ユーザーアクティビティを作成する必要がないことがあります。
* **他のユーザーによって完了したアクションに対しては、アクティビティを作成しないでください。** 外部アカウントがユーザーをアプリ内に送信する場合は @-mentions 、そのアカウントのアクティビティを作成しないでください。 この種類のアクションは、アクションセンターの通知によってより適切に提供されます。
  * コラボレーションシナリオは例外です。複数のユーザーが同時に同じアクティビティを操作している場合 (Word 文書など)、ユーザーが別のユーザーに変更を加えた場合があります。 この場合は、既存のアクティビティを更新して、ドキュメントに加えられた変更を反映させることができます。 これには、新しい履歴項目を作成せずに、既存のユーザーアクティビティコンテンツデータを更新する操作が含まれます。

**特定の種類のアプリに関するガイドライン**

すべてのアプリは異なりますが、ほとんどのアプリは次のいずれかの対話パターンに分類されます。
* **ドキュメントベースのアプリ** —ドキュメントごとに1つのアクティビティを作成し、1つまたは複数の履歴項目で使用期間を反映します。 ドキュメントに変更が加えられたときに、アクティビティを更新することが重要です。
* **ゲーム** : セーブまたは世界の各ゲームに1つのアクティビティを作成します。 ゲームで1つのレベルのシーケンスのみがサポートされている場合は、同じアクティビティを時間の経過と共に再発行できます。ただし、コンテンツデータを更新して最新の進行状況やアチーブメントを表示することもできます。
* **ユーティリティアプリ** -ユーザーが残して再開する必要があるアプリ内に何もない場合は、ユーザーアクティビティを使用する必要はありません。 優れた例として、電卓などの単純なアプリがあります。
* **基幹業務アプリ** -単純なタスクやワークフローを管理するための多くのアプリが存在します。 アプリを介してアクセスされる個別のワークフローごとに1つのアクティビティを作成します (たとえば、経費報告書はそれぞれ独立したアクティビティであるため、ユーザーはアクティビティをクリックして特定のレポートが承認されたかどうかを確認できます)。
* **メディア再生アプリ** -コンテンツの論理グループごとに1つのアクティビティ (再生リスト、プログラム、またはスタンドアロンコンテンツなど) を作成します。 アプリ開発者にとっての基礎となる質問は、コンテンツの各部分 (テレビエピソード、曲) がスタンドアロンコンテンツまたはコレクションの一部としてカウントされるかどうかです。 一般的な規則として、ユーザーがコレクションまたはシーケンシャルコンテンツを再生するようにすると、コレクション全体がアクティビティになります。 1つのコンテンツを再生することを選択した場合は、コンテンツの1つの部分がアクティビティになります。 以下の具体的なガイドラインを参照してください。
  * **音楽: アルバム/アーティスト/ジャンル** : ユーザーがアルバム、アーティスト、またはジャンルを **選択し、ヒットし**た場合、そのコレクションはアクティビティです。曲ごとに個別のアクティビティを記述しないでください。 1つのアルバムまたはコレクションがランダムに再生されるような短いコレクションでは、ユーザーの現在の位置を反映するためにアクティビティを更新する必要がない場合があります。 アルバムや再生リストなどの長いシーケンシャル再生では、アルバム内の位置を記録するのが理にかなっている場合があります。
  * **音楽: スマート再生リスト** -ランダムな順序で音楽を再生するアプリケーションは、その再生リストの1つのアクティビティを記録する必要があります。 ユーザーが2回目に再生リストを再生する場合は、同じアクティビティに対して追加の履歴レコードを作成します。 順序がランダムであるため、再生リストのユーザーの現在の位置を記録する必要はありません。
  * **テレビシリーズ** -現在のユーザーの完了後に次のエピソードを再生するようにアプリが構成されている場合は、テレビシリーズの1つのアクティビティを作成する必要があります。 複数の表示セッションでさまざまなエピソードを再生する際には、アクティビティを更新して、系列内の現在の位置を反映させ、複数の履歴レコードを作成します。
  * **ムービー** : ムービーは1つのコンテンツであり、独自の履歴レコードを持っている必要があります。 ユーザーがムービーの視聴を停止した場合、その位置を記録することをお勧めします。 後で再開する場合、アクティビティは、中断された場所にあるムービーを再開したり、最初から再開または開始するかどうかをユーザーに確認したりすることができます。

## <a name="user-activity-design"></a>ユーザーアクティビティの設計

ユーザーアクティビティは、アクティブ化 URI、ビジュアルデータ、コンテンツメタデータの3つのコンポーネントで構成されています。
* アクティベーション URI は、特定のコンテキストでアプリケーションを再開するためにアプリケーションまたはエクスペリエンスに渡すことができる URI です。 通常、これらのリンクは、スキームのプロトコルハンドラーの形式を使用します ("my app:/page2? action = edit" など)。 URI パラメーターがアプリによってどのように処理されるかは、開発者が決定します。 詳細については、「 [ハンドル URI のアクティブ化](./handle-uri-activation.md) 」を参照してください。
* ビジュアルデータは、一連の必須プロパティと省略可能なプロパティ (タイトル、説明、アダプティブカード要素など) で構成され、ユーザーがアクティビティを視覚的に識別できるようにします。 アクティビティのアダプティブカードビジュアルを作成するためのガイドラインについては、以下を参照してください。
* コンテンツメタデータは、特定のコンテキストでアクティビティをグループ化および取得するために使用できる JSON データです。 通常、これはデータの形式に http://schema.org なります。 このデータの入力に関するガイドラインについては、以下を参照してください。

### <a name="adaptive-card-design-guidelines"></a>アダプティブカードのデザインガイドライン

アクティビティがタイムラインに表示されると、 [アダプティブカードフレームワーク](/adaptive-cards/)を使用して表示されます。 開発者がアクティビティごとにアダプティブカードを提供していない場合、タイムラインは、アプリの名前/アイコン、必須のタイトルフィールド、および省略可能な説明フィールドに基づいて、単純なカードを自動的に作成します。 

アプリ開発者は、単純なアダプティブカード JSON スキーマを使用してカスタムカードを提供することをお勧めします。 アダプティブカードオブジェクトを作成する方法の技術的な手順については、 [アダプティブカードのドキュメント](/adaptive-cards/authoring-cards/getting-started) を参照してください。 ユーザーアクティビティでアダプティブカードを設計する場合は、以下のガイドラインを参照してください。
* 画像を使用する
  * 可能な場合は、アクティビティごとに一意のイメージを使用します。 アプリケーションの名前とアイコンが、アクティビティのカードの横に自動的に表示されます。その他のイメージは、ユーザーが探しているアクティビティを特定するのに役立ちます。
  * ユーザーが読み取ることが想定されているテキストをイメージに含めることはできません。 このテキストは、ユーザー補助のニーズを持つユーザーには使用できず、検索することもできません。
  * 画像にテキストが含まれておらず、2:1 の比率でトリミングできる場合は、背景画像として使用する必要があります。 これにより、タイムラインに表示される、太字のアクティビティカードが生成されます。 画像は少し暗くなり、テキストがカードに表示されたままになります。また、この場合はアクティビティ名を使用することをお勧めします。この場合、小さいテキストを読むのが困難になります。
  * イメージを2:1 にトリミングできない場合は、アクティビティカード内に配置する必要があります。  
    * 縦横比が正方形または縦の場合は、カードの右側に余白なしでイメージを固定します。
    * 縦横比が横の場合は、カードの右上隅に画像を固定します。
* 各アクティビティには、常に表示されるアクティビティ名を指定する必要があります。
  * この名前は、大きな太字のテキストオプションを使用して、カードの左上隅に表示されます。 この名前は簡単に認識できることが重要です。これは、Cortana シナリオでアクティビティが表示されるときにユーザーに表示される唯一の部分です。 タイムラインに同じ名前が表示されると、ユーザーは大量のアクティビティを簡単に参照できるようになります。
* アプリのすべてのアクティビティに同じ視覚スタイルを使用して、ユーザーが自分のアプリのアクティビティをタイムラインで簡単に見つけられるようにします。
  * たとえば、アクティビティはすべて同じ背景色を使用する必要があります。
* 補足テキスト情報は控えめに使用してください。 
  * カードにテキストを入力しないようにし、ユーザーが適切な活動を見つけたり、状態情報 (特定のタスクの現在の進行状況など) を反映したりするのに役立つ補足情報のみを使用します。

### <a name="content-metadata-guidelines"></a>コンテンツメタデータのガイドライン

ユーザーアクティビティには、コンテンツメタデータを含めることもできます。このメタデータは、Windows および Cortana がアクティビティを分類して推論を生成するために使用します。 アクティビティは、特定のトピック (ユーザーが休暇を研究している場合)、オブジェクト (ユーザーが何かを調査している場合)、またはアクション (ユーザーがさまざまなアプリや web サイトで特定の製品を購入している場合) など、グループ化することができます。 アクティビティに含まれる名詞と動詞の両方を表すことをお勧めします。 

次の例では、 [Schema.org](https://schema.org/)の標準に続くコンテンツメタデータの JSON は、"John が加藤さんと上田さんをプレイしています" というシナリオを表しています。

```json
// John played angry birds with Steve.
{
  "@context": "http://schema.org",
  "@type": "PlayAction",
  "agent": {
    "@type": "Person",
    "name": "John"
  },
  "object": {
    "@type": "MobileApplication",
    "name": "Angry Birds."
  },
  "participant": {
    "@type": "Person",
    "name": "Steve"
  }
}
```

## <a name="key-apis"></a>キー API

* [UserActivities 名前空間](/uwp/api/windows.applicationmodel.useractivities)

## <a name="related-topics"></a>関連トピック

* [ユーザーアクティビティ (プロジェクトローマドキュメント)](/windows/project-rome/user-activities/)
* [アダプティブカード](/adaptive-cards/)
* [アダプティブ カード ビジュアライザー、サンプル](https://adaptivecards.io/)
* [URI のアクティブ化の処理](./handle-uri-activation.md)
* [Microsoft Graph、アクティビティ フィード、およびアダプティブ カードを使用して、どのプラットフォームでも顧客の関心を惹きつける](https://channel9.msdn.com/Events/Connect/2017/B111)
* [Microsoft Graph](https://developer.microsoft.com/graph)